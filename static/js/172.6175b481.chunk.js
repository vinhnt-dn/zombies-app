(globalThis.webpackChunkzombies_app=globalThis.webpackChunkzombies_app||[]).push([[172],{24259:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Page:()=>q,Widget:()=>P,widgetConfig:()=>O});var n=s(55754),a=s(98846),i=s(92950),r=s(95418),c=s(34559),o=s(99019);const l={"logo-telegram":s.p+"static/media/icon-telegram.2450489f40d03000fe65fc1c6f238d85.svg"};var d=s(45263);const u=(0,i.forwardRef)(((e,t)=>{let{name:s,className:n,...a}=e;const i=n?"anticon "+n:"anticon";return(0,d.jsx)("span",{className:i,...a,children:l[s]?(0,d.jsx)("ion-icon",{ref:t,src:l[s]}):(0,d.jsx)("ion-icon",{ref:t,name:s})})}));var h=s(19289);const p="zombie",m=(0,h.createAsyncThunk)("zombie/generateZombie",(async(e,t)=>{let{newZombie:s}=e,{getState:n}=t;const{zombie:{zombies:a}}=n();return console.log("Actions generate zombie: ",s),{zombies:[...a,s]}})),f=(0,h.createSlice)({name:p,initialState:{zombies:[]},reducers:{},extraReducers:e=>{e.addCase(m.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer;var g=s(15190);const x={appId:"zombies_app",url:"https://vinhnt-dn.github.io/zombies-app//index.js"},v={devnet:{node:"https://api.devnet.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},testnet:{node:"https://api.testnet.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},mainnet:{node:"https://api.mainnet-beta.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"}},w={manifest:{development:{...x},staging:{...x},production:{...x}}[g.OB],sol:v[g.ef]};var j=s(3007);const b=e=>{let{zombieName:t}=e;return(0,d.jsx)("div",{className:"home-card game-card",children:(0,d.jsxs)("div",{className:"zombie-char",children:[(0,d.jsx)("div",{className:"zombie-loading zombie-parts"}),(0,d.jsx)("div",{className:"zombie-card",children:(0,d.jsx)("div",{className:"card-header hide-overflow-text",children:t})})]})})};let y;const C=(0,i.forwardRef)(((e,t)=>{var s;let{max:n,onValue:a=(()=>{}),onChange:r=(()=>{}),...c}=e;const[l,h]=(0,i.useState)(""),[p,m]=(0,i.useState)(null),f=(0,i.useRef)(t),g=(0,i.useCallback)((e=>{const t=e=>{y&&(clearTimeout(y),y=void 0),h(e),y=setTimeout((()=>h("")),500)};return/^\d*(\.\d*)?$/.test(e)?n&&parseFloat(e)>parseFloat(n.toString())?t("Not enough balance"):a(e):t("Invalid character")}),[n,a]);return null!==p&&(null===f||void 0===f||null===(s=f.current)||void 0===s||s.setSelectionRange(p,p)),(0,d.jsx)(o.Tooltip,{title:(0,d.jsxs)(o.Space,{children:[(0,d.jsx)(u,{name:"warning"}),l]}),visible:!!l,children:(0,d.jsx)(o.Input,{...c,onChange:e=>{r(e),m(e.target.selectionStart),g(e.target.value||"")},ref:f})})})),{manifest:{appId:A}}=w,T=()=>{const{wallet:{address:e}}=(0,a.useWallet)(),{accounts:t}=(0,a.useAccount)(),s=(0,n.useDispatch)(),{zombies:l}=(0,n.useSelector)((e=>e.zombie)),[h,p]=(0,i.useState)(0),[f,g]=(0,i.useState)([]),[x,v]=(0,i.useState)(Object),[w,y]=(0,i.useState)(Object),[T,S]=(0,i.useState)(Object),I=(0,i.useMemo)((()=>(0,j.f)(e,A)),[e]),k=(0,i.useCallback)((async()=>{let e=Math.floor(101*Math.random());s(m({newZombie:{id:e,name:"Zombie: "+e}}))}),[s]),N=(0,i.useCallback)((async e=>{let s=await window.sentre.splt.getMintData(t[e].mint),n=await window.sentre.splt.getAccountData(e);return{accountAddress:e,balance:Number(r.utils.undecimalize(n.amount,s.decimals)),mint:t[e].mint,decimals:s.decimals}}),[t]),z=(0,i.useCallback)((async()=>{let s=await window.sentre.lamports.getLamports(e);p(s);let n=[];for(const e in t){let t=await N(e);n=[...n,t]}g(n)}),[e,t,N]);return(0,i.useEffect)((()=>{I&&I.setItem("zombies",l)}),[I,l]),(0,d.jsxs)(o.Row,{gutter:[24,24],align:"middle",children:[(0,d.jsx)(o.Col,{span:24,children:(0,d.jsxs)(o.Space,{align:"center",children:[(0,d.jsx)(u,{name:"newspaper-outline"}),(0,d.jsx)(o.Typography.Title,{level:4,children:"Page"})]})}),(0,d.jsx)(o.Col,{span:24,children:(0,d.jsx)(o.Card,{className:"card-page card-sen-test scrollbar",children:(0,d.jsxs)(o.Row,{gutter:[24,24],align:"middle",children:[(0,d.jsx)(o.Col,{flex:"auto",children:(0,d.jsx)(o.Typography.Title,{level:4,children:"Sen Test"})}),(0,d.jsx)(o.Col,{span:24,children:(0,d.jsxs)(o.Typography.Text,{children:["Address: ",e]})}),(0,d.jsx)(o.Col,{span:24,children:(0,d.jsxs)(o.Typography.Text,{children:["Lamports: ",h]})}),f&&f.map(((t,s)=>(0,d.jsx)(o.Col,{xl:{span:12},lg:{span:12},md:{span:12},xs:{span:24},children:(0,d.jsxs)(o.Spin,{size:"small",spinning:T[t.accountAddress]||!1,children:[(0,d.jsx)(o.Col,{span:24,children:(0,d.jsxs)(o.Typography.Text,{children:["Account Address: ",t.accountAddress]})}),(0,d.jsx)(o.Col,{span:24,children:(0,d.jsxs)(o.Typography.Text,{children:["Amount: ",t.balance]})},s),(0,d.jsx)(o.Col,{span:24,children:(0,d.jsx)(o.Typography.Text,{children:"Receiver Address"})}),(0,d.jsx)(o.Col,{span:24,children:(0,d.jsxs)(o.Space,{children:[(0,d.jsx)(o.Input,{size:"large",placeholder:`${e.substring(0,12)}...`,onChange:e=>((e,t)=>{let s={...w,[`${t}`]:e.target.value};y(s)})(e,t.accountAddress)}),(0,d.jsx)(C,{placeholder:"0",onValue:e=>((e,t)=>{let s={...x,[`${t}`]:e};v(s)})(e,t.accountAddress)}),(0,d.jsx)(o.Button,{onClick:()=>(async e=>{S({[`${e.accountAddress}`]:!0});try{const{splt:t}=window.sentre,s=window.sentre.wallet,n=r.utils.decimalize(x[e.accountAddress],e.decimals),a=await t.deriveAssociatedAddress(w[e.accountAddress],e.mint);console.log("Data transfer: ",n,e.accountAddress,a,s);const{txId:i}=await t.transfer(n,e.accountAddress,a,s);S({[`${e.accountAddress}`]:!1}),window.open((0,c.kU)(i),"_blank"),window.notify({type:"success",description:"Transfer"})}catch(t){window.notify({type:"error",description:t.message})}finally{S({[`${e.accountAddress}`]:!1})}})(t),children:"Transfer"})]})})]})},s)))]})})}),(0,d.jsx)(o.Col,{children:(0,d.jsx)(o.Button,{onClick:z,children:"Get account data"})}),(0,d.jsx)(o.Col,{children:(0,d.jsx)(o.Button,{onClick:k,children:"Generate Zombie"})}),(0,d.jsx)(o.Col,{span:24,children:(0,d.jsx)(o.Row,{gutter:[24,24],justify:"space-between",children:l&&l.map(((e,t)=>(0,d.jsx)(o.Col,{className:"gutter-row",lg:{span:6},md:{span:12},xs:{span:24},children:(0,d.jsx)(b,{zombieName:e.name})},t)))})})]})},S="main",I=(0,h.createAsyncThunk)("main/increaseCounter",(async(e,t)=>{let{getState:s}=t;const{main:{counter:n}}=s();return{counter:n+1}})),k=(0,h.createSlice)({name:S,initialState:{counter:0},reducers:{},extraReducers:e=>{e.addCase(I.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,N=()=>{const{ui:{width:e,infix:t}}=(0,a.useUI)(),s=(0,n.useDispatch)(),{counter:r}=(0,n.useSelector)((e=>e.main)),c=(0,i.useCallback)((()=>s(I())),[s]);return(0,d.jsxs)(o.Row,{gutter:[24,24],children:[(0,d.jsx)(o.Col,{span:24,children:(0,d.jsxs)(o.Space,{align:"center",children:[(0,d.jsx)(u,{name:"apps-outline"}),(0,d.jsx)(o.Typography.Title,{level:4,children:"Widget"})]})}),(0,d.jsx)(o.Col,{span:24,children:(0,d.jsxs)(o.Typography.Text,{children:["Env: ",g.OB," - ",e,"px - ",t]})}),(0,d.jsx)(o.Col,{children:(0,d.jsxs)(o.Typography.Text,{children:["Counter: ",r]})}),(0,d.jsx)(o.Col,{children:(0,d.jsx)(o.Button,{onClick:c,children:"Increase"})})]})};var z=s(85912);const R=(0,h.configureStore)({middleware:e=>e(z.h),devTools:(0,z.$)("zombies_app"),reducer:{main:k,zombie:f}}),{manifest:{appId:Q}}=w,q=()=>(0,d.jsx)(a.UIProvider,{appId:Q,antd:!0,children:(0,d.jsx)(a.WalletProvider,{children:(0,d.jsx)(a.PoolProvider,{children:(0,d.jsx)(a.MintProvider,{children:(0,d.jsx)(a.AccountProvider,{children:(0,d.jsx)(n.Provider,{store:R,children:(0,d.jsx)(T,{})})})})})})}),O={size:"small",type:"solid"},P=()=>(0,d.jsx)(a.UIProvider,{appId:Q,antd:!0,children:(0,d.jsx)(n.Provider,{store:R,children:(0,d.jsx)(N,{})})})},67751:(e,t,s)=>{"use strict";s.d(t,{U:()=>a});var n=s(15822);class a{static set(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.qf;this.mapCache.set(e,t),setTimeout((()=>{this.mapCache.delete(e)}),s.ttl)}static get(e){return this.mapCache.get(e)}}a.mapCache=new Map},15822:(e,t,s)=>{"use strict";s.d(t,{qf:()=>n,Dt:()=>a});const n={ttl:3e4},a={limit:{calls:10,time:1e3},cache:n}},21411:(e,t,s)=>{"use strict";var n=s(15822),a=s(85964),i=s(67751);class r{static getSingleFlight(e){const t=JSON.stringify(e);if(this.mapInstance.has(t)){const e=this.mapInstance.get(t);if(e)return e}let s=new c(e);return this.mapInstance.set(t,s),s}static async load(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"===typeof e&&(e=JSON.stringify(e));let n=r.getSingleFlight(s);r.mapInstance.set(e,n);const i=new a.g(e);return n.load(i,t)}}r.mapInstance=new Map;class c{constructor(e){this.config=void 0,this.intervalRequest=void 0,this.timeLogs=[],this.mapRequestCalling=new Map,this.requestQueue=[],this.config=Object.assign(n.Dt,e)}async load(e,t){const s=i.U.get(e.key);if(s)return Promise.resolve(s);let n=!1,a=this.mapRequestCalling.get(e.key);return a||(a=e,n=!0,this.mapRequestCalling.set(a.key,a)),new Promise(((e,s)=>{if(!a)return s("Not found request!");a.add(e,s),n&&this.fetch(a,t)}))}fetch(e,t){if(!this.validateLimit())return this.addRequestQueue(e,t);this.createTimeLogs(),t().then((t=>{i.U.set(e.key,t,this.config.cache),e.resolves(t)})).catch((t=>{e.rejects(t)})).finally((()=>{this.mapRequestCalling.delete(e.key),this.fetchRequestQueue(t)}))}fetchRequestQueue(e){if(!this.validateLimit())return;const t=this.requestQueue.shift();t&&this.load(t,e),0===this.requestQueue.length&&this.intervalRequest&&clearInterval(this.intervalRequest)}addRequestQueue(e,t){var s;this.requestQueue.push(e),this.intervalRequest=setInterval((()=>{this.fetchRequestQueue(t)}),null===(s=this.config.limit)||void 0===s?void 0:s.time)}validateLimit(){return!0}createTimeLogs(){var e;if(!this.config.limit)return;const t=(new Date).getTime();this.timeLogs.push(t),this.timeLogs.length>(null===(e=this.config.limit)||void 0===e?void 0:e.calls)&&this.timeLogs.shift()}}},85964:(e,t,s)=>{"use strict";s.d(t,{g:()=>n});class n{constructor(e){this.key="",this.resolveQueue=[],this.rejectQueue=[],this.key=e}add(e,t){this.resolveQueue.push(e),this.rejectQueue.push(t)}resolves(e){for(;this.resolveQueue.length>0;){this.resolveQueue.shift()(e)}}rejects(e){for(;this.rejectQueue.length>0;){this.rejectQueue.shift()(e)}}}},85912:(e,t,s)=>{"use strict";s.d(t,{$:()=>n,h:()=>a});const n=e=>!1;BigInt.prototype.toJSON=function(){return this.toString()};const a={serializableCheck:{isSerializable:e=>"undefined"===typeof e||null===e||"string"===typeof e||"boolean"===typeof e||"number"===typeof e||Array.isArray(e)||(e=>{if(null===e)return!1;const t=Object.getPrototypeOf(e);return null!==t&&null===Object.getPrototypeOf(t)})(e)||"bigint"===typeof e}}},3007:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o,f:()=>l});var n=s(15454),a=s.n(n),i=s(95418),r=s(83868);class c{constructor(e){if(this.dbName=void 0,this.driver=void 0,this.ipfs=void 0,this.createInstance=e=>a().createInstance({driver:this.driver,name:this.dbName,storeName:e}),this.dropInstance=async e=>{const t=this.createInstance(e);return await t.clear(),await a().dropInstance({name:this.dbName,storeName:e})},this.all=async()=>{let e={};const t=(await this.createInstance("sentre").getItem("appIds")||[]).flat().concat(["sentre"]);for(const s of t){e[s]={};const t=this.createInstance(s);await t.iterate(((t,n)=>{e[s][n]=t}))}return e},this.fetch=async e=>await this.ipfs.get(e),this.backup=async()=>{const e=await this.all();return await this.ipfs.set(e)},this.restore=async e=>{const t=await this.fetch(e);for(const s in t){const e=await this.createInstance(s);for(const n in t[s]){const a=t[s][n];await e.setItem(n,a)}}return t},!i.account.isAddress(e))throw new Error("Invalid address");this.dbName=e,this.driver=[a().WEBSQL,a().LOCALSTORAGE],this.ipfs=new r.Z}}const o=c,l=(e,t)=>i.account.isAddress(e)?new c(e).createInstance(t):void 0},83868:(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var n=s(32642),a=s(34559),i=s(97429).Buffer;class r{constructor(){this._ipfs=async()=>{try{return window.ipfs||(window.ipfs=await(0,n.Ue)()),window.ipfs}catch(e){return await(0,a.sA)(500),await this._ipfs()}},this.get=async e=>{if(!r.isCID(e))throw new Error("Invalid CID");const t=await this._ipfs(),s=await t.cat(e);let n="";for await(const a of s)n+=i.from(a).toString();return JSON.parse(n)},this.set=async e=>{if(!e)throw new Error("Empty data");const t=JSON.stringify(e),s=await this._ipfs(),{path:n}=await s.add(t);return n}}}r.isCID=e=>{try{return!!e&&n.bf.multihash(e)}catch(t){return!1}};const c=r},15190:(e,t,s)=>{"use strict";s.d(t,{OB:()=>o,ef:()=>l});const n="sentre",a=window.localStorage,i=e=>{try{return e?JSON.parse(e):null}catch(t){return null}},r={set:(e,t)=>{let s=i(a.getItem(n));s&&"object"===typeof s||(s={}),s[e]=t,a.setItem(n,JSON.stringify(s))},get:e=>{let t=i(a.getItem(n));return t&&"object"===typeof t?t[e]:null},clear:e=>{r.set(e,null)}},c=r,o="production",l=(()=>{switch(c.get("network")){case"devnet":return"devnet";case"testnet":return"testnet";default:return"mainnet"}})()},34559:(e,t,s)=>{"use strict";s.d(t,{sA:()=>i,kU:()=>r});var n=s(95418),a=(s(16200),s(15190));s(21411);const i=e=>new Promise((t=>setTimeout(t,e))),r=e=>n.account.isAddress(e)?`https://explorer.solana.com/address/${e}?cluster=${a.ef}`:`https://explorer.solana.com/tx/${e}?cluster=${a.ef}`},35883:()=>{},46601:()=>{},89214:()=>{},5696:()=>{},85568:()=>{},64009:()=>{},42611:()=>{},88795:()=>{},89408:()=>{},57600:()=>{},21724:()=>{},62678:()=>{},25819:()=>{},52361:()=>{},94616:()=>{},55024:()=>{}}]);
//# sourceMappingURL=172.6175b481.chunk.js.map